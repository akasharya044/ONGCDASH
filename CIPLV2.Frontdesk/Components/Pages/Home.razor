

@page "/dashboard"
@rendermode InteractiveServer
@using CIPLV2.Models.DeviceDetail
<PageTitle>Home</PageTitle>
<RadzenDialog @rendermode="RenderMode.InteractiveServer"></RadzenDialog>
<RadzenNotification @rendermode="RenderMode.InteractiveServer"></RadzenNotification>

<div class="loader" hidden="@(loading?false:true)"></div>
<RadzenRow>
    <RadzenColumn Style="padding-bottom:10px;" SizeMD="4" onclick="ToggleVisibility2()">
        <RadzenCard Style="max-width: 300px ; height: 160px!important;background-color:white;box-shadow: 0 0 20px 1px #D8D8D8;
   " class=" bod">
            <RadzenRow RowGap="0" class="tex">
                <RadzenColumn SizeSM="4">
                    <RadzenText class="tex" style="text-align:center;color:#0B60B0; font-size:30px;padding-bottom:5px;"><b>@device.RunningDevices</b></RadzenText>
                    <RadzenText class="tex" style="text-align:center; color:#0B60B0;font-size:20px;">Online Agents</RadzenText>
                    
                </RadzenColumn>
                <RadzenColumn SizeSM="8">
                    <div class="lg:block hidden cursor-pointer tex " style="text-align:right;"><svg stroke="currentColor" fill="#0B60B0" stroke-width="0" viewBox="0 0 24 24" class="lg:text-6xl opacity-30 animate-pulse" height="3em" width="3em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-3a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"></path></g></svg></div>
                </RadzenColumn>
            </RadzenRow>
            @* <NavLink class="redzen-link d-block bg-yellow" onclick="ToggleVisibility2()" style="background-color:#02c76c; color:white; text-decoration:none; text-align:center; margin-left:-19px; margin-right:-19px;  margin-bottom:-20px;     margin-top: 56px; overflow: hidden;
                            border-radius: 0 0 3px 3px;" >More Info <span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"></path></svg></span></NavLink> *@
        </RadzenCard>

    </RadzenColumn>

    <RadzenColumn SizeMD="4" onclick="ToggleVisibility3()">
        <RadzenCard Style="max-width: 300px; height: 160px!important;background-color:white;box-shadow: 0 0 20px 1px #D8D8D8;" class="bod">
            <RadzenRow RowGap="0">
                <RadzenColumn SizeSM="4" class="tex">
                    <RadzenText class="tex" style="text-align:center;color:#0B60B0;font-size:30px;padding-bottom:5px;"><b>@(device.TotalDevices - device.RunningDevices)</b></RadzenText>
                    <RadzenText class="tex" style="text-align:center; color:#0B60B0;font-size:20px;">Offline Agents</RadzenText>
                </RadzenColumn>
                <RadzenColumn SizeSM="8">
                    <div class="lg:block hidden cursor-pointer" style="text-align:right;"><svg stroke="currentColor" fill="#0B60B0" stroke-width="0" viewBox="0 0 16 16" class="lg:text-6xl opacity-30" height="3em" width="3em" xmlns="http://www.w3.org/2000/svg"><path d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"></path></svg></div>
                </RadzenColumn>
            </RadzenRow>
            @* <NavLink class="redzen-link d-block bg-yellow" onclick="ToggleVisibility3()" style="background-color:#02c76c; color:white; text-decoration:none; text-align:center; margin-left:-19px; margin-right:-19px;  margin-bottom:-20px; overflow: hidden;     margin-top: 56px;
                            border-radius: 0 0 3px 3px;" >More Info <span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"></path></svg></span></NavLink> *@
        </RadzenCard>
    </RadzenColumn>

    <RadzenColumn SizeMD="4" onclick="ToggleVisibility()">

        <RadzenCard Style="max-width: 300px ; height: 160px!important;background-color:white;box-shadow: 0 0 20px 1px #D8D8D8;" class="bod">
            <RadzenRow RowGap="0">
                <RadzenColumn SizeSM="4" class="tex">
                    <RadzenText class="tex" style="text-align:center;color:#0B60B0; font-size:30px; padding-bottom:5px;"><b>@_device.Count()</b></RadzenText>
                    <RadzenText class="tex" style="text-align:center; color:#0B60B0;font-size:20px;">Installed Agents</RadzenText>
                </RadzenColumn>
                <RadzenColumn SizeSM="8">
                    <div class="lg:block hidden cursor-pointer" style="text-align:right;"><svg stroke="currentColor" fill="#0B60B0" stroke-width="0" viewBox="0 0 512 512" class="lg:text-6xl opacity-30 " height="3em" width="3em" xmlns="http://www.w3.org/2000/svg"><path d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"></path></svg></div>
                </RadzenColumn>
            </RadzenRow>
            @* <NavLink class="redzen-link d-block bg-yellow" onclick="ToggleVisibility()" style="background-color:#02c76c; color:white; text-decoration:none; text-align:center; margin-left:-19px; margin-right:-19px;  margin-bottom:-80px;    margin-top: 56px; overflow: hidden;
                            border-radius: 0 0 3px 3px;">More Info <span><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0zM4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5H4.5z"></path></svg></span></NavLink> *@
        </RadzenCard>
    </RadzenColumn>

    @* <RadzenColumn SizeMD="3" onclick="ToggleVisibility1()" >
        <RadzenCard Style="max-width: 300px ;height: 160px!important; background-color:white;box-shadow: 0 0 20px 1px #D8D8D8;" class="bod">
            <RadzenRow RowGap="0">
                <RadzenColumn SizeSM="4" class="tex">
                    <RadzenText style="text-align:center;color:#0B60B0;font-size:30px;padding-bottom:5px;"><b>@_device1.Count()</b></RadzenText>
                    <RadzenText class="" style="text-align:center; color:#0B60B0;font-size:20px;">Total Devices</RadzenText>
                </RadzenColumn>
                <RadzenColumn SizeSM="8">
                    <div class="lg:block hidden cursor-pointer " style="text-align:right;"><svg stroke="currentColor" fill="#0B60B0" stroke-width="0" viewBox="0 0 640 512" class="md:text-5xl opacity-30" height="3em" width="3em" xmlns="http://www.w3.org/2000/svg"><path d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path></svg></div>
                </RadzenColumn>
            </RadzenRow>
            </RadzenCard>

    </RadzenColumn>
 *@

</RadzenRow>
<hr class="style2" />
<style>
    hr.style2 {
        border-top: 3px double #8c8b8b;
    }

    .custom-datagrid {
        /* Add your custom styles here */
        font-size: 16px;
        border: 1px solid #ccc;
        /* Add more styles as needed */
    }

        .custom-datagrid .rz-datagrid {
            /* Override or add styles specific to the grid */
            background-color: #f8f8f8;
            /* Add more styles as needed */
        }

        .custom-datagrid .rz-header {
            /* Styles for the header row */
            background-color: #333;
            color: white;
            /* Add more styles as needed */
        }
    .bot{
        margin-bottom: 10px;
        /* justify-content: end; */
        /* justify-items: flex-end; */
        /* justify-self: end; */
        /* position: absolute; */

        position: relative;
        left: 96%;
        
        
    }


    .tex:hover {
        color: #0B60B0 !important;
    }

    .bod:hover{
        border-style: solid;
        border-color: #0B60B0;
        
    }

</style>


<script>



    function ToggleVisibility() {
        document.getElementById('installed').style.display = 'block';
        //document.getElementById('uninstalled').style.display = 'none';
        document.getElementById('online').style.display = 'none';
        document.getElementById('offline').style.display = 'none';
    }

    function ToggleVisibility1() {
        document.getElementById('installed').style.display = 'none';
        //document.getElementById('uninstalled').style.display = 'block';
        document.getElementById('online').style.display = 'none';
        document.getElementById('offline').style.display = 'none';
    }
    
    function ToggleVisibility2() {
        document.getElementById('online').style.display = 'block';
        document.getElementById('offline').style.display = 'none';
        document.getElementById('installed').style.display = 'none';
        //document.getElementById('uninstalled').style.display = 'none';
    }

    function ToggleVisibility3() {
        document.getElementById('online').style.display = 'none';
        document.getElementById('offline').style.display = 'block';
        document.getElementById('installed').style.display = 'none';
        //document.getElementById('uninstalled').style.display = 'none';
    }
</script>




<div class="installed" id="installed" style="display:none;">
    <RadzenCard Variant="@variant" Class="rz-my-12 rz-mx-auto" Style="max-width: 100%">
    @* <h3 class="custom-heading">Installed Agents</h3>

    <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvInstalled><i class=" fa fa-solid fa-download"></i></button>
 *@
        <div class="col-12">
            <h3 style="margin-bottom:-2.5rem;" class="custom-heading">Installed Agents</h3>
            <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvInstalled><i class=" fa fa-solid fa-download"></i></button>


        </div>
    <RadzenDataGrid Data="_device" AllowPaging="true"  AllowSorting="true" TItem="DeviceDetailsDtos"
                    AllowFiltering="true" FilterMode="FilterMode.Advanced"
                        PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
                        LogicalFilterOperator="LogicalFilterOperator.Or" PageSizeOptions="@pageSizeOptions">
        <Columns>
            <RadzenDataGridColumn Width="100px" TItem="DeviceDetailsDtos" Property="Sno" Title="Sr.No" Filterable=false Sortable=true>
                <Template Context="ctx">
                    @(_device.ToList()?.IndexOf(ctx) + 1)
                </Template>
            </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="entity_type" Title="EntityType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.SubType" Title="SubType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.DisplayLabel" Title="DisplayLabel" Width="100px" />

        </Columns>
    </RadzenDataGrid>
    </RadzenCard>
</div>


@* <div class="uninstalled" id="uninstalled" style="display:none;">
    <RadzenCard Variant="@variant" Class="rz-my-12 rz-mx-auto" Style="max-width: 100%">
    <h3 class="custom-heading">Total Agents</h3>
    <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvUnInstalled><i class=" fa fa-solid fa-download"></i></button>
    <RadzenDataGrid Data="_device1" AllowPaging="true"  AllowSorting="true" TItem="DeviceDetailsDtos" class="custom-datagrid"
                    AllowFiltering="true" FilterMode="FilterMode.Advanced" LogicalFilterOperator="LogicalFilterOperator.Or" PageSizeOptions="@pageSizeOptions">
        <Columns>
            <RadzenDataGridColumn Width="100px" TItem="DeviceDetailsDtos" Property="Sno" Title="Sr.No" Filterable=false Sortable=true>
                <Template Context="ctx">
                    @(_device1.ToList()?.IndexOf(ctx) + 1)
                </Template>
            </RadzenDataGridColumn>

            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="entity_type" Title="EntityType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.SubType" Title="SubType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.DisplayLabel" Title="DisplayLabel" Width="100px" />

        </Columns>
    </RadzenDataGrid>
    </RadzenCard>
</div> *@



<div class="uninstalled" id="online" style="display:block;">
     <RadzenCard Variant="@variant" Class="rz-my-12 rz-mx-auto" Style="max-width: 100%">
   @*  <h3 class="custom-heading">Online Agents</h3>
    <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvOnline><i class=" fa fa-solid fa-download"></i></button>
      *@   <div class="col-12">
            <h3 style="margin-bottom:-2.5rem;" class="custom-heading">Online Agents</h3>
            <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvOnline><i class=" fa fa-solid fa-download"></i></button>


        </div>
    
    <RadzenDataGrid @ref="_refonn" Data="rundevices" AllowPaging="true" AllowSorting="true" TItem="DeviceDetailsDtos"
                        AllowFiltering="true" FilterMode="FilterMode.Advanced"
                        PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
                        LogicalFilterOperator="LogicalFilterOperator.Or" PageSizeOptions="@pageSizeOptions">
            <Columns>
                <RadzenDataGridColumn Width="100px" TItem="DeviceDetailsDtos" Property="Sno" Title="Sr.No" Filterable=false Sortable=true>
                    <Template Context="ctx">
                        @(rundevices.ToList()?.IndexOf(ctx) + 1)
                    </Template>
                </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="entity_type" Title="EntityType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.SubType" Title="SubType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.DisplayLabel" Title="DisplayLabel" Width="100px" />

        </Columns>
    </RadzenDataGrid>
    </RadzenCard>
</div>

<div class="uninstalled" id="offline" style="display:none;">
     <RadzenCard Variant="@variant" Class="rz-my-12 rz-mx-auto" Style="max-width: 100%">
    @* <h3 class="custom-heading">Offline Agents</h3>
    <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvOffline><i class=" fa fa-solid fa-download"></i></button>
      *@
        <div class="col-12">
            <h3 style="margin-bottom:-2.5rem;" class="custom-heading">Offline Agents</h3>
            <button class="btn bot btn-outline-secondary" @onclick=@DownloadCsvOffline><i class=" fa fa-solid fa-download"></i></button>


        </div>
      <RadzenDataGrid @ref=_refOff Data="offdevices" AllowPaging="true" PageSize="10" AllowSorting="true" TItem="DeviceDetailsDtos" class="custom-datagrid"
                    AllowFiltering="true" FilterMode="FilterMode.Advanced"
                        PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
                        LogicalFilterOperator="LogicalFilterOperator.Or" PageSizeOptions="@pageSizeOptions">
        <Columns>
                <RadzenDataGridColumn Width="100px" TItem="DeviceDetailsDtos" Property="Sno" Title="Sr.No" Filterable=false Sortable=true>
                    <Template Context="ctx">
                        @(offdevices.ToList()?.IndexOf(ctx) + 1)
                    </Template>
                </RadzenDataGridColumn>
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="entity_type" Title="EntityType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.SubType" Title="SubType" Width="100px" />
            <RadzenDataGridColumn TItem="DeviceDetailsDtos" Property="properties.DisplayLabel" Title="DisplayLabel" Width="100px" />

        </Columns>
    </RadzenDataGrid>
    </RadzenCard>
</div>
@* <div class="uninstalled" id="offline" style="display:none;">
    <table>
        <tr>
            <td>EntityType</td>
            <td>SubType</td>
            <td>DisplayLabel</td>
        </tr>
        @foreach(var item in offdevices)
        {
            <tr>
                <td>@item.entity_type</td>
                <td>@item.properties.SubType</td>
                <td>@item.properties.DisplayLabel</td>
            </tr>
        }
    </table>
</div>
 *@
